(this.webpackJsonpbattleship=this.webpackJsonpbattleship||[]).push([[0],{82:function(t,e,r){"use strict";r.r(e);var n=r(1),a=r.n(n),i=r(63),c=r.n(i),u=r(19),o=r(12),s=r(3),l=r(94),h=r(98),p=r(91),d=r(92),f=r(93),m=r(4),j=function(t){var e,r=t.turn,a=t.placeShips,i=t.players,c=t.startGame,u=t.setStartGame,o=t.humanBoard,j=t.computerBoard,b=t.alertShipSunk,y=t.setAlertShipSunk,O=t.restartGame,S=Object(n.useState)(!1),v=Object(s.a)(S,2),x=v[0],g=v[1],k="",B="",H="",A="",w=!(!o.gameOver&&!j.gameOver);Object(n.useEffect)((function(){var t=setTimeout((function(){return y(!1)}),3e3);return function(){return clearTimeout(t)}}),[b]),Object(n.useEffect)((function(){w&&g(!1)}),[w]),c?c&&!w?H="Place Ships":c&&w&&(H="Play Again"):H="Start Game";return"playerHuman"===r?(k="green",B="your"):"playerAi"===r&&(k="gray",B="the computer's"),e=x?Object(m.jsx)("span",{}):Object(m.jsx)(h.a,{mt:4,colorScheme:"teal",onClick:function(){c?w?O():(a(i.playerHuman),a(i.playerAi),g(!0)):u(!0)},children:H}),A=b?Object(m.jsx)(p.a,{color:"red",children:"SHIP SUNK!"}):o.gameOver?Object(m.jsx)(p.a,{color:k,children:"Computer Wins!"}):j.gameOver?Object(m.jsx)(p.a,{color:k,children:"You win!"}):null===r?Object(m.jsx)(p.a,{color:"gray.600",children:"Place your ships to get started."}):Object(m.jsxs)(p.a,{color:k,children:["Its ",B," turn."]}),Object(m.jsx)(d.a,{children:Object(m.jsxs)(f.a,{maxW:"350px",bg:"white",p:"5",my:"30",border:"1px solid",borderColor:"gray.500",borderRadius:"3px",align:"center",children:[Object(m.jsx)(l.a,{size:"s",children:"Welcome to the game! Let's play."}),A,e]})})},b=r(6),y=r(99),O=r(95),S=function(t){var e=t.hasShip,r=t.ai,n=t.handleUnitClick,a=t.index,i=t.isHit,c=t.disabled,u=e?r?"white":"blue":"white";e&&i?u="red":!e&&i&&(u="teal.100",c=!0);return Object(m.jsx)(O.b,{children:Object(m.jsx)(d.a,{w:"50px",h:"50px",bg:u,border:"1px",borderColor:"gray.500",borderRadius:"5px",_hover:c?null:{background:"gray.300"},onClick:c?null:function(){n(a)},children:a})})},v=function(t){var e,r,a,i,c=t.startGame,o=t.humanBoard,s=t.setHumanBoard,l=t.computerBoard,h=t.setComputerBoard,p=t.turn,d=t.setTurn,j=t.players,v=t.setPlayers,x=t.setAlertShipSunk;if(Object(n.useEffect)((function(){if("playerAi"===p){for(var t=!1,e="";!t;){t=!0;var n=j.playerAi.aiPlay();(e=r.filterUnit(n)[0]).isHit&&(t=!1)}var a=setTimeout((function(){k(e.name),d("playerHuman")}),10);return function(){return clearTimeout(a)}}}),[p]),!c)return null;var g=!0;"playerHuman"===p?(e=j.playerAi,i="playerAi",r=l,a=h,g=!1):"playerAi"===p&&(e=j.playerHuman,i="playerHuman",r=o,a=s,g=!0);var k=function(t){r.receiveAttack(r.units[t].coordinates,e.myShips).sunk&&x(!0);var n=r.gameOverCheck(e.myShips);n&&d(null),a((function(t){return Object(u.a)(Object(u.a)({},t),{},{units:r.units,gameOver:n})})),v((function(t){return Object(u.a)(Object(u.a)({},t),{},Object(b.a)({},i,e))}))},B=function(t){d("playerAi"),k(t)},H=function(t){return t.units.map((function(e,r){return Object(m.jsx)(S,{index:r,hasShip:e.hasShip,ai:t.ai,disabled:g,handleUnitClick:g?null:B,isHit:e.isHit},r)}))},A=H(o),w=H(l);return Object(m.jsxs)(y.a,{justifyContent:"center",children:[Object(m.jsx)(f.a,{w:"510px",py:"5px",px:"5px",borderRadius:"3px",bg:"blue.500",children:Object(m.jsx)(O.a,{justify:"center",spacing:"0",children:A})}),Object(m.jsx)(f.a,{w:"510px",py:"5px",px:"5px",borderRadius:"3px",bg:"red.500",children:Object(m.jsx)(O.a,{justify:"center",spacing:"0",children:w})})]})},x=function(t){var e,r=[],n=1;"human"===t?e=!1:"computer"===t?e=!0:console.log("error with ai");var a=function(){return Math.floor(10*Math.random())},i=function(t,e){var r;return t.data.orientation===e?(r=t.data.length,Math.floor(Math.random()*(10-r+1))):t.data.orientation!==e?a():void alert("error. ship orientation: "+t.data.orientation+"direction: "+e)};return{aiPlay:function(){return[a(),a()]},playerPickShipCoordinates:function(t){var e=[],r=i(t,"x"),n=i(t,"y");if("x"===t.data.orientation){for(var a=r;a<t.data.length+r;a++)e.push([a,n]);return e}if("y"===t.data.orientation){for(var c=n;c<t.data.length+n;c++)e.push([r,c]);return e}},addShip:function(t){var e=function(t){var e=function(){return 0===r.hitPoints},r={hitPoints:t,sunk:!1,hit:function(){r.hitPoints--,r.sunk=e()},checkIfSunk:e,length:t,orientation:function(){var t=Math.floor(Math.random()<.5);return 0===t?"x":1===t?"y":"error"}(),whichShip:"notSet",resetShips:function(){}};return{data:r}}(t);e.data.whichShip=n,n++,r.push(e)},myShips:r,ai:e}},g=function(t){var e=!1,r=!1;"computer"===t&&(e=!0);var n=function(t){var e=[],r=[],n=[];return function(){for(var t=0;t<10;t++)for(var e=[],a="",i=0;i<10;i++)e=[i,t],a="square"+i+t,r.push(e),n.push(a)}(),function(){for(var t=0;t<100;t++){var n={name:t,coordinates:r[t],isHit:!1,hasShip:!1,whichShip:!1};e.push(n)}}(),e}(),a=function(t){var e=[];return t.forEach((function(t){e=e.concat(n.filter((function(e){return e.coordinates[0]===t[0]&&e.coordinates[1]===t[1]})))})),e},i=function(t){return n.filter((function(e){return e.coordinates[0]===t[0]&&e.coordinates[1]===t[1]}))},c=function(t,e){t.hasShip=!0,t.whichShip=e.data.whichShip},u=function(t,e){t.isHit=!0},o=function(t,e,r,n){return t.map((function(t){return e.find((function(e){return e.name===t.name}))&&r(t,n),t}))};return{units:n,placeShip:function(t,e){var r;return r=2===t.length&&void 0===t[0][0]?i(t):a(t),n=o(n,r,c,e)},filterUnits:a,filterUnit:i,spaceChecker:function(t){return t.every((function(t){return!t.hasShip}))},updateShipInfo:o,receiveAttack:function(t,e){var r=i(t),a=i(t)[0];if(!a.hasShip)return o(n,r,u,!1),!1;if(a.hasShip){var c=a.whichShip,s=e.filter((function(t){return t.data.whichShip===c}))[0];return s.data.hit(),o(n,r,u,s),s.data}alert("error in filtering unit in attack")},addPlayers:function(t){return"human"===t?{playerHuman:x("human")}:"computer"===t?{playerAi:x("computer")}:void alert("error creating player, no player type specified")},ai:e,gameOverCheck:function(t){return t.every((function(t){return t.data.sunk}))},gameOver:r}},k=function(){return{start:function(){var t=g(),e=g("computer"),r=t.addPlayers("human"),n=e.addPlayers("computer"),a=[5,4,3,2,1],i=r.playerHuman,c=n.playerAi;return a.forEach((function(t){return i.addShip(t)})),a.forEach((function(t){return c.addShip(t)})),{humanBoard:t,computerBoard:e,playerHuman:i,playerAi:c}}}},B=function(t){var e=Object(n.useState)(null),r=Object(s.a)(e,2),i=r[0],c=r[1],h=Object(n.useState)("noHumanBoard"),p=Object(s.a)(h,2),d=p[0],f=p[1],b=Object(n.useState)("noComputerBoard"),y=Object(s.a)(b,2),O=y[0],S=y[1],x=Object(n.useState)("noPlayers"),g=Object(s.a)(x,2),B=g[0],H=g[1],A=Object(n.useState)(!1),w=Object(s.a)(A,2),C=w[0],P=w[1],E=Object(n.useState)(!1),G=Object(s.a)(E,2),M=G[0],U=G[1],T=Object(n.useState)([]),I=Object(s.a)(T,2),W=(I[0],I[1]);Object(n.useEffect)((function(){var t=k().start(),e=t.playerHuman,r=t.playerAi,n=t.humanBoard,a=t.computerBoard;H({playerHuman:e,playerAi:r}),f(n),S(a)}),[C]);return Object(m.jsxs)(a.a.Fragment,{children:[Object(m.jsx)(l.a,{align:"center",children:"Welcome to Battleship"}),Object(m.jsx)(j,{players:B,placeShips:function(t){var e=t.myShips,r=d;t.ai;c("playerHuman"),t.ai&&(r=O),e.forEach((function(e){for(var n=!1,a=[];!n;)n=!0,(a=t.playerPickShipCoordinates(e)).forEach((function(t){r.filterUnit(t)[0].hasShip&&(n=!1)}));var i=r.placeShip(a,e);W((function(t){return[].concat(Object(o.a)(t),[a])})),t.ai?t.ai?S((function(t){return Object(u.a)(Object(u.a)({},t),{},{units:i})})):alert("error with updating units"):f((function(t){return Object(u.a)(Object(u.a)({},t),{},{units:i})}))}))},startGame:C,setStartGame:P,turn:i,humanBoard:d,computerBoard:O,alertShipSunk:M,setAlertShipSunk:U,restartGame:function(){H("no players"),S("noComputerBoard"),f("noHumanBoard"),P(!1),c(null)}}),Object(m.jsx)(v,{startGame:C,humanBoard:d,computerBoard:O,turn:i,setTurn:c,players:B,setPlayers:H,setHumanBoard:f,setComputerBoard:S,setAlertShipSunk:U})]})},H=r(97),A=r(96);var w=function(){return Object(n.useEffect)((function(){document.title="\ud83d\udef3 Battleship"}),[]),Object(m.jsx)(H.a,{children:Object(m.jsx)(A.a,{maxW:"100%",height:"100vh",py:"5",bg:"gray.100",children:Object(m.jsx)(B,{})})})};c.a.render(Object(m.jsx)(a.a.StrictMode,{children:Object(m.jsx)(w,{})}),document.getElementById("root"))}},[[82,1,2]]]);
//# sourceMappingURL=main.7438530e.chunk.js.map